 <%- include('../partials/header') %>
<h2 class="mb-4">Edit Concert</h2>

<form action="/concerts/<%= concert._id %>?_method=PUT" method="POST" enctype="multipart/form-data">
    <input type="hidden" name="existingImage" value="<%= concert.image %>">
    
    <div class="mb-3">
        <label for="name" class="form-label">Concert Name</label>
        <input type="text" class="form-control" id="name" name="name" value="<%= concert.name %>" required>
    </div>
    
    <div class="row mb-3">
        <div class="col-md-6">
            <label for="date" class="form-label">Date</label>
            <input type="date" class="form-control" id="date" name="date" 
                   value="<%= concert.date.toISOString().split('T')[0] %>" required>
        </div>
        <div class="col-md-6">
            <label for="time" class="form-label">Time</label>
            <input type="time" class="form-control" id="time" name="time" value="<%= concert.time %>" required>
        </div>
    </div>
    
    <div class="mb-3">
        <label for="venue" class="form-label">Venue</label>
        <input type="text" class="form-control" id="venue" name="venue" value="<%= concert.venue %>" required>
    </div>
    
    <div class="row mb-3">
        <div class="col-md-6">
            <label for="ticketPrice" class="form-label">Ticket Price ($)</label>
            <input type="number" step="0.01" class="form-control" id="ticketPrice" name="ticketPrice" 
                   value="<%= concert.ticketPrice %>" required>
        </div>
        <div class="col-md-6">
            <label for="availableTickets" class="form-label">Available Tickets</label>
            <input type="number" class="form-control" id="availableTickets" name="availableTickets" 
                   value="<%= concert.availableTickets %>" required>
        </div>
    </div>
    
    <div class="mb-3">
        <label for="image" class="form-label">Concert Image</label>
        <input type="file" class="form-control" id="image" name="image">
        <% if (concert.image && concert.image !== 'https://via.placeholder.com/300') { %>
            <div class="mt-2">
                <small class="text-muted">Current image:</small>
                <img src="/uploads/<%= concert.image %>" class="img-thumbnail mt-1" width="100">
            </div>
        <% } %>
    </div>
    
    <div class="d-flex justify-content-between">
        <button type="submit" class="btn btn-primary">Update Concert</button>
        <a href="/concerts/<%= concert._id %>" class="btn btn-secondary">Cancel</a>
    </div>
</form>