<%- include('../partials/header') %>

<div class="container mt-4">
  <h1 class="mb-4">My Bookings</h1>
  
  <% if (bookings.length === 0) { %>
    <div class="alert alert-info">
      You haven't booked any concerts yet. 
      <a href="/concerts">Browse concerts</a> to make your first booking!
    </div>
  <% } else { %>
    <div class="row">
      <% bookings.forEach(booking => { %>
        <div class="col-md-6 mb-4">
          <div class="card h-100">
            <div class="row g-0">
              <div class="col-md-4">
                <img src="<%= booking.concert.image || '/images/default-concert.jpg' %>" 
                     class="img-fluid rounded-start h-100" 
                     alt="<%= booking.concert.name %>"
                     style="object-fit: cover;">
              </div>
              <div class="col-md-8">
                <div class="card-body">
                  <h5 class="card-title"><%= booking.concert.name %></h5>
                  <p class="card-text">
                    <i class="fas fa-calendar-day"></i> 
                    <%= moment(booking.concert.date).format('MMMM Do YYYY') %>
                  </p>
                  <p class="card-text">
                    <i class="fas fa-map-marker-alt"></i> 
                    <%= booking.concert.venue %>
                  </p>
                  <div class="d-flex justify-content-between align-items-center">
                    <span class="badge bg-<%= booking.status === 'confirmed' ? 'success' : 'danger' %>">
                      <%= booking.status.toUpperCase() %>
                    </span>
                    <a href="/bookings/<%= booking._id %>" class="btn btn-sm btn-primary">
                      View Details
                    </a>
                  </div>
                </div>
                <div class="card-footer bg-white">
                  <small class="text-muted">
                    Booked on <%= moment(booking.bookedAt).format('MMMM Do YYYY, h:mm a') %> • 
                    <%= booking.tickets %> ticket(s) • $<%= (booking.tickets * booking.concert.ticketPrice).toFixed(2) %>
                  </small>
                </div>
              </div>
            </div>
          </div>
        </div>
      <% }); %>
    </div>
  <% } %>
</div>

<%- include('../partials/footer') %>